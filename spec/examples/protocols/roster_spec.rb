##########################################################################################################################################################################
require 'spec_helper'

##########################################################################################################################################################################
describe 'roster protocol' do
##########################################################################################################################################################################

  #.......................................................................................................................................................................
  include SpecInclude

  ####**********************************************************************************************************************************************************************
  context 'when session starts successfully' do
    
    ####**********************************************************************************************************************************************************************
    context 'and before roster query result is received' do
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should have status :inactive for all roster items in database' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_all_roster_items' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_roster_item' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_acknowledge_add_roster_item' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_add_roster_item_error' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_remove_roster_item' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_acknowledge_remove_roster_item' do
      end
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not call on_remove_roster_item_error' do
      end
      
    end

    ####**********************************************************************************************************************************************************************
    context 'and after roster query result is received' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should call on_all_roster_items' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should call on_roster_item' do
      end

      ####**********************************************************************************************************************************************************************
      context 'when roster items are in in database' do

        ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
        it 'should set status to :both ' do
        end

      end

      ####**********************************************************************************************************************************************************************
      context 'when roster items in database are not in query result' do

        ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
        it 'should send add to roster message for each roster item in database' do
        end

      end
      
      ####**********************************************************************************************************************************************************************
      context 'when roster items in query result are not in database' do

        ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
        it 'should send remove from roster item message for each roster item in query result' do
        end
      
      end

    end

    ####**********************************************************************************************************************************************************************
    context 'and when roster query error is received' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should throw an exception' do
      end
      
    end
    
  end

  ####**********************************************************************************************************************************************************************
  context 'when a remove from roster message is sent' do

    ####**********************************************************************************************************************************************************************
    context 'and an acknowledgement response is recieved' do
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should call on_acknowledge_remove_roster_item' do
      end
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send no response message' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'roster item should not be in database' do
      end
      
    end
    
    ####**********************************************************************************************************************************************************************
    context 'and an error response is recieved' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not respond' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should call on_remove_roster_item_error' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not find roster item in database' do
      end

    end
    
  end

  ####**********************************************************************************************************************************************************************
  context 'when an add to roster message is sent' do

    ####**********************************************************************************************************************************************************************
    context 'and an acknowledgement response is recieved' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send a subscription request' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should set roster item status to :added' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should call on_acknowledge_add_roster_item' do
      end

    end

    ####**********************************************************************************************************************************************************************
    context 'and an error response is recieved' do
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not respond' do
      end
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should call on_add_roster_item_error' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should not find roster item in database' do
      end
      
    end
    
  end
  
  ####**********************************************************************************************************************************************************************
  context 'when add to roster request is received' do

    ####**********************************************************************************************************************************************************************
    context 'and roster item is not in database' do
      
      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send remove from roster message' do
      end
      
    end

    ####**********************************************************************************************************************************************************************
    context 'with subscription=none (not subscribed to contact presense)' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send no response message' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should set roster item status to :added' do
      end

    end

    ####**********************************************************************************************************************************************************************
    context 'with subscription=none and ask=subscribe (subscription to contact presence pending)' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send no response message' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should set roster item status to :ask' do
      end

    end

    ####**********************************************************************************************************************************************************************
    context 'with subscription=to (subscribed to contact presence but contact not subscribed to application presence)' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send no response message' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should set roster item status to :to' do
      end

    end

    ####**********************************************************************************************************************************************************************
    context 'with subscription=both (subscribed to contact presence and contact subscribed to application presence)' do

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should send no response message' do
      end

      ####--------------------------------------------------------------------------------------------------------------------------------------------------------------------
      it 'should set roster item status to :both' do
      end

    end
    
  end
        
end