# Original from XMPP4R - XMPP Library for Ruby Website::http://home.gna.org/xmpp4r/
##############################################################################################################
module AgentXmpp

  #####-------------------------------------------------------------------------------------------------------
  module Xmpp

    #####-------------------------------------------------------------------------------------------------------
    class IqCommand < Iq

      #.....................................................................................................
      name_xmlns 'command', 'http://jabber.org/protocol/commands'

      #####-------------------------------------------------------------------------------------------------------
      class << self
        
        #.........................................................................................................
        def result(args)
          iq = Xmpp::Iq.new(:result, args[:to])
          iq.id = args[:id] unless args[:id].nil?
          iq.command = new(args[:node], 'completed')
          iq.command << args[:payload]
          Send(iq)      
        end
        
      #### self
      end

      #.....................................................................................................
      def initialize(node=nil, action=nil)
        super()
        self.node = node
        self.action = action || :execute
      end

      #.....................................................................................................
      def node
        attributes['node']
      end

      #.....................................................................................................
      def node=(v)
        attributes['node'] = v
      end

      #.....................................................................................................
      def sessionid
        attributes['sessionid']
      end

      #.....................................................................................................
      def sessionid=(v)
        attributes['sessionid'] = v
      end

      #.....................................................................................................
      def action
        attributes['action'].to_sym
      end

      #.....................................................................................................
      def action=(v)
        attributes['action'] = v.to_s
      end

      #.....................................................................................................
      def status
        attributes['status'].to_sym
      end

      #.....................................................................................................
      def status=(v)
        attributes['status'] = v.to_s
      end

      #.....................................................................................................
      def actions
        first_element('actions')
      end

    #### IqCommand
    end

  #### XMPP
  end
  
#### AgentXmpp
end
